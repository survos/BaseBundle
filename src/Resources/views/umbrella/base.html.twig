<!doctype html>
<html lang="{{ app.request.locale }}">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
    <meta http-equiv="X-UA-Compatible" content="ie=edge"/>

    <link rel="icon" type="image/x-icon" href="{{ asset('favicon.ico') }}" />
{#    <script src="//unpkg.com/@ungap/custom-elements"></script>#}
    {% block stylesheets %}
        {% include "@UmbrellaAdmin/_stylesheets.html.twig" %}
        {{ encore_entry_link_tags('app') }}
    {% endblock %}
</head>

{% set _menu_controller = 'mmenu_light' %}\
{#{{ stimulus_controller(_menu_controller) }}#}
<body  class="env-{{ app.environment }}" {% block body_class %} {% block body_start '' %}{% endblock %}>

{% block body_inner_html %}

    <div class="wrapper">

        {% block sidebar %}
            {% if admin_menu is not defined %}
                {% set admin_menu = get_menu(admin.menuName()) %}
            {% endif %}
            {{ render_menu(admin_menu) }}

{#            // what a mess.  Someday...#}

{#        {% set menuCode = 'survos_sidebar_menu' %}#}
{#            {% set menuItem = knp_menu_get(menuCode, [],  {#}
{#                'comment': "This is an option passed in knp_menu_get",#}
{#                'menu_code'     : menuCode,#}
{#            }) %}#}

{#                <nav {{ stimulus_target(_menu_controller, 'menu') }}>#}
{#                    {% set menuHtml = knp_menu_render(menuItem, {#}
{#                        "template"      : "@SurvosBase/adminlte/knp_menu.html.twig",#}
{#                        "debug": debug|default(false),#}
{#                        currentAsLink: true,#}
{#                        firstClass: 'f',#}
{#                        "currentClass"  : "active",#}
{#                        "ancestorClass" : "nav-item menu-open",#}
{#                        "branch_class"  : "nav-item",#}
{#                        'leaf_class'    : 'nav-item leaf',#}
{#                        'link_class'    : 'nav-link',#}
{#                        "allow_safe_labels": true,#}
{#                        'rootAttributes': {#}
{#                            id: 'root-element',#}
{#                            'class': 'nav nav-pills nav-sidebar flex-column',#}
{#                            'data-lte-toggle': 'treeview',#}
{#                            'data-accordian': 'false',#}
{#                            'role': 'menu'#}
{#                        },#}

{#                        'comment': "This is an option passed in knp_menu_render",#}
{#                    })#}
{#                    %}#}
{#                    {{ menuHtml|raw }}#}
{#                </nav>#}
{#            <div {{ stimulus_target(_menu_controller, 'msg') }}>Message here.</div>#}
{#            </div>#}
        {% endblock %}

        <div class="main" {{ stimulus_target(_menu_controller, 'page') }}>

            {% block navbar %}
                {#        {{ include("@SurvosBase/adminlte/_example_topbar.html.twig") }}#}
                {{ include("@SurvosBase/umbrella/_navbar.html.twig") }}
            {% endblock %}

            <main class="content">
                <div class="{{ admin.containerClass }}">
                    {% block content %}
                        {{ block('body') }}
                    {% endblock %}
                </div>
            </main>
        </div>
    </div>

{% endblock %}

{% include "@UmbrellaCore/_toast.html.twig" %}

{% block javascripts %}
    {{ encore_entry_script_tags('app') }}
    {# needed for sidebar collapse #}
    {% include "@UmbrellaAdmin/_scripts.html.twig" %}
{% endblock %}
</body>
</html>






